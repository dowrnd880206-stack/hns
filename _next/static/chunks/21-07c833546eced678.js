"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{407:(e,t,r)=>{r.d(t,{A:()=>d,AuthProvider:()=>o});var a=r(4),s=r(3176),n=r(8620);let i=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[d,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("currentUser");if(e)try{o(JSON.parse(e))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("currentUser")}l(!1)},[]);let c=async(e,t)=>{l(!0);try{let r=await (0,n.iD)(e,t);if(r)return o(r),localStorage.setItem("currentUser",JSON.stringify(r)),!0;return!1}catch(e){return console.error("Login failed:",e),!1}finally{l(!1)}},u=async e=>{try{let t=JSON.parse(localStorage.getItem("pendingUsers")||"[]"),r={id:Date.now().toString(),employeeId:e.employeeId,password:e.password,name:e.name,email:e.email,department:e.department,role:e.role,status:"pending",createdAt:new Date().toISOString()};return t.push(r),localStorage.setItem("pendingUsers",JSON.stringify(t)),window.dispatchEvent(new Event("storage")),!0}catch(e){return console.error("Registration failed:",e),!1}};return(0,a.jsx)(i.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:d,login:c,logout:()=>{o(null),localStorage.removeItem("currentUser")},switchUser:e=>{let t=n.rB.find(t=>t.id===e);t&&(o(t),localStorage.setItem("currentUser",JSON.stringify(t)))},register:u},children:t})}function d(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},894:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>o,Zp:()=>n,aR:()=>i});var a=r(4);r(3176);var s=r(8347);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},2963:(e,t,r)=>{r.d(t,{BK:()=>o,eu:()=>i,q5:()=>d});var a=r(4);r(3176);var s=r(8793),n=r(8347);function i(e){let{className:t,...r}=e;return(0,a.jsx)(s.bL,{"data-slot":"avatar",className:(0,n.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)(s._V,{"data-slot":"avatar-image",className:(0,n.cn)("aspect-square size-full",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,n.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...r})}},4806:(e,t,r)=>{r.d(t,{DashboardLayout:()=>V});var a=r(4),s=r(3176),n=r(8924),i=r(2963),o=r(8471),d=r(8347);function l(e){let{...t}=e;return(0,a.jsx)(o.bL,{"data-slot":"dropdown-menu",...t})}function c(e){let{...t}=e;return(0,a.jsx)(o.l9,{"data-slot":"dropdown-menu-trigger",...t})}function u(e){let{className:t,sideOffset:r=4,...s}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsx)(o.UC,{"data-slot":"dropdown-menu-content",sideOffset:r,className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function m(e){let{className:t,inset:r,variant:s="default",...n}=e;return(0,a.jsx)(o.q7,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":s,className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function h(e){let{className:t,inset:r,...s}=e;return(0,a.jsx)(o.JU,{"data-slot":"dropdown-menu-label","data-inset":r,className:(0,d.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...s})}function p(e){let{className:t,...r}=e;return(0,a.jsx)(o.wv,{"data-slot":"dropdown-menu-separator",className:(0,d.cn)("bg-border -mx-1 my-1 h-px",t),...r})}var f=r(6949),x=r(3311),v=r(9611),g=r(3776),b=r(348),w=r(3064),j=r(3771),y=r(407),N=r(9467),k=r(8620),A=r(9713),I=r.n(A),C=r(1938);function S(e){let{isOpen:t,onClose:r}=e,{user:s}=(0,y.A)(),i=(0,N.Sk)(),o=(0,C.usePathname)();if(!s)return null;let l=e=>{e.preventDefault(),alert("업데이트 예정입니다")},c=[{title:"대시보드",icon:x.A,href:"/dashboard",show:!0},{title:"점검 관리",icon:v.A,href:"/dashboard/inspections",show:!0,children:[{title:"캘린더 보기",href:"/dashboard/inspections/calendar",show:!0},{title:"점검 보고 작성",href:"/dashboard/inspections/reports",show:!0,isExpandable:!0,children:[{title:"홈앤서비스",href:"/dashboard/inspections/reports/homeservice",show:!0},{title:"SK브로드밴드",href:"/dashboard/inspections/reports/skbroadband",show:!0}]}]},{title:"게시판",icon:g.A,href:"/dashboard/board",show:!0,children:[{title:"공지사항",href:"/dashboard/board/notice",show:!0},{title:"자유게시판",href:"/dashboard/board/free",show:!0},{title:"익명제보",href:"/dashboard/board/anonymous",show:!0}]},{title:"개안심",icon:b.A,href:"/dashboard/privacy",show:!0,isAlert:!0,children:[{title:"개안심7",href:"/dashboard/privacy/privacy7",show:!0,isAlert:!0},{title:"리포트 등록",href:"/dashboard/privacy/reports",show:!0,isAlert:!0}]},{title:"관리자",icon:w.A,href:"/dashboard/admin",show:i.canManageUsers,children:[{title:"계정 승인 관리",href:"/dashboard/admin/users",show:i.canManageUsers}]}],u=e=>"/dashboard"===e?o===e:o.startsWith(e);return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:r}),(0,a.jsx)("aside",{className:(0,d.cn)("fixed left-0 top-16 z-50 h-[calc(100vh-4rem)] w-64 transform border-r bg-sidebar transition-transform duration-200 ease-in-out md:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 md:hidden",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"메뉴"}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:r,children:(0,a.jsx)(j.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"border-b p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-primary-foreground font-medium",children:s.name.charAt(0)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sidebar-foreground",children:s.name}),(0,a.jsx)(f.E,{variant:"secondary",className:"text-xs",children:(0,k.cb)(s.role)})]})]})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:c.map(e=>e.show?(0,a.jsxs)("div",{children:[e.isAlert?(0,a.jsxs)(n.$,{variant:u(e.href)?"secondary":"ghost",className:"w-full justify-start gap-3 h-10",onClick:l,children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),e.title]}):(0,a.jsx)(I(),{href:e.href,children:(0,a.jsxs)(n.$,{variant:u(e.href)?"secondary":"ghost",className:"w-full justify-start gap-3 h-10",onClick:()=>r(),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),e.title]})}),e.children&&(0,a.jsx)("div",{className:"ml-6 mt-1 space-y-1",children:e.children.map(e=>e.show?(0,a.jsx)("div",{children:e.isAlert?(0,a.jsx)(n.$,{variant:u(e.href)?"secondary":"ghost",size:"sm",className:"w-full justify-start text-sm text-muted-foreground hover:text-foreground",onClick:l,children:e.title}):e.isExpandable?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground font-medium px-3 py-2",children:e.title}),e.children&&(0,a.jsx)("div",{className:"ml-4 space-y-1",children:e.children.map(e=>e.show?(0,a.jsx)(I(),{href:e.href,children:(0,a.jsxs)(n.$,{variant:u(e.href)?"secondary":"ghost",size:"sm",className:"w-full justify-start text-xs text-muted-foreground hover:text-foreground pl-2",onClick:()=>r(),children:["• ",e.title]})},e.title):null)})]}):(0,a.jsx)(I(),{href:e.href,children:(0,a.jsx)(n.$,{variant:u(e.href)?"secondary":"ghost",size:"sm",className:"w-full justify-start text-sm text-muted-foreground hover:text-foreground",onClick:()=>r(),children:e.title})})},e.title):null)})]},e.title):null)})]})})]})}var z=r(8634),E=r(1294),U=r(1736);function V(e){let{children:t}=e,[r,o]=(0,s.useState)(!1),{user:d,logout:f}=(0,y.A)(),x=(0,C.useRouter)();return d?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>o(!r),children:(0,a.jsx)(z.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded bg-primary flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-primary-foreground font-bold text-xs",children:"수도권1"===d.department?"수1":"수도권2"===d.department?"수2":"중부"===d.department?"중부":"서부"===d.department?"서부":"대구"===d.department?"대구":"부산"===d.department?"부산":"NW운용"===d.department?"NW":"경영지원팀"===d.department?"경영":"홈"})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"홈앤서비스 개인정보 시스템"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,a.jsxs)(i.eu,{className:"h-10 w-10",children:[(0,a.jsx)(i.BK,{src:"/placeholder.svg",alt:d.name}),(0,a.jsx)(i.q5,{children:d.name.charAt(0)})]})})}),(0,a.jsxs)(u,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(h,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:d.name}),(0,a.jsxs)("p",{className:"text-xs leading-none text-muted-foreground",children:[d.department," \xb7 ",d.position]})]})}),(0,a.jsx)(p,{}),(0,a.jsxs)(m,{onClick:()=>x.push("/dashboard/profile"),children:[(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"마이페이지"})]}),(0,a.jsx)(p,{}),(0,a.jsxs)(m,{onClick:()=>{f(),x.push("/")},children:[(0,a.jsx)(U.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"로그아웃"})]})]})]})})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(S,{isOpen:r,onClose:()=>o(!1)}),(0,a.jsx)("main",{className:"flex-1 p-6 md:ml-64",children:t})]})]}):null}},6949:(e,t,r)=>{r.d(t,{E:()=>d});var a=r(4);r(3176);var s=r(6369),n=r(4552),i=r(8347);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,asChild:n=!1,...d}=e,l=n?s.DX:"span";return(0,a.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(o({variant:r}),t),...d})}},8347:(e,t,r)=>{r.d(t,{cn:()=>n});var a=r(5894),s=r(7399);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},8620:(e,t,r)=>{r.d(t,{cb:()=>n,iD:()=>s,rB:()=>a});let a=[{id:"1",name:"홈앤",employeeId:"admin",department:"설비관리팀",position:"팀장",role:"admin",isApproved:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"일데모",employeeId:"tnehrnjs1",department:"수도권1",position:"본부담당자",role:"staff",region:"수도권1",isApproved:!0,createdAt:new Date("2024-01-02")},{id:"3",name:"이데모",employeeId:"tnehrnjs2",department:"수도권2",position:"본부담당자",role:"staff",region:"수도권2",isApproved:!0,createdAt:new Date("2024-01-03")}];async function s(e,t){if("admin"===e&&"windows"===t)return a.find(e=>"admin"===e.role)||null;try{let r=JSON.parse(localStorage.getItem("approvedUsers")||"[]").find(r=>r.employeeId===e&&r.password===t);if(r)return{id:r.id,name:r.name,employeeId:r.employeeId,department:r.department,position:r.role,role:r.role,region:r.department,isApproved:!0,createdAt:new Date(r.createdAt)}}catch(e){console.error("Failed to check approved users:",e)}try{let r=JSON.parse(localStorage.getItem("demoPasswords")||"{}");if(r[e]&&r[e]===t){let t=a.find(t=>t.employeeId===e);if(t)return t}}catch(e){console.error("Failed to check demo passwords:",e)}let r=a.find(t=>t.employeeId===e);return r&&(t===e||"password"===t)?r:null}function n(e){switch(e){case"admin":return"최고 관리자";case"manager":return"현장 매니저";case"staff":return"점검 담당자";default:return"사용자"}}},8924:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>o});var a=r(4);r(3176);var s=r(6369),n=r(4552),i=r(8347);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:n,asChild:d=!1,...l}=e,c=d?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:n,className:t})),...l})}},9467:(e,t,r)=>{r.d(t,{Sk:()=>s});var a=r(407);function s(){let{user:e}=(0,a.A)();if(!e)return{canViewAllInspections:!1,canCreateInspections:!1,canApproveExceptions:!1,canManageUsers:!1,canViewTeamInspections:!1,canCreateExceptionRequests:!1,canViewOwnExceptionRequests:!1};let t=e.role||"staff",r={admin:{canViewAllInspections:!0,canCreateInspections:!0,canApproveExceptions:!0,canManageUsers:!0,canViewTeamInspections:!0,canCreateExceptionRequests:!1,canViewOwnExceptionRequests:!1},manager:{canViewAllInspections:!1,canCreateInspections:!0,canApproveExceptions:!0,canManageUsers:!1,canViewTeamInspections:!0,canCreateExceptionRequests:!1,canViewOwnExceptionRequests:!1},staff:{canViewAllInspections:!1,canCreateInspections:!1,canApproveExceptions:!1,canManageUsers:!1,canViewTeamInspections:!1,canCreateExceptionRequests:!0,canViewOwnExceptionRequests:!0}};return r[t]||r.staff}}}]);