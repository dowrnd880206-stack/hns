(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1158:(e,s,t)=>{"use strict";t.d(s,{ProtectedRoute:()=>i});var r=t(4),a=t(407),l=t(894),n=t(348),c=t(9306);function i(e){let{children:s,requiredRoles:t,fallback:i}=e,{user:d,isAuthenticated:x,isLoading:m}=(0,a.A)();return m?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):x&&d?t&&!t.includes(d.role)?i||(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,r.jsx)(l.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(l.Wu,{className:"text-center py-8",children:[(0,r.jsx)(c.A,{className:"h-12 w-12 mx-auto mb-4 text-destructive"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"접근 권한이 없습니다"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"이 페이지에 접근할 권한이 없습니다."})]})})}):(0,r.jsx)(r.Fragment,{children:s}):i||(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,r.jsx)(l.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(l.Wu,{className:"text-center py-8",children:[(0,r.jsx)(n.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"로그인이 필요합니다"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"이 페이지에 접근하려면 로그인해주세요."})]})})})}},1253:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(7561).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2005:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(7561).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5120:(e,s,t)=>{Promise.resolve().then(t.bind(t,1158)),Promise.resolve().then(t.bind(t,5418)),Promise.resolve().then(t.bind(t,4806))},5418:(e,s,t)=>{"use strict";t.d(s,{DashboardContent:()=>j});var r=t(4),a=t(894),l=t(6949),n=t(8924),c=t(7561);let i=(0,c.A)("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);var d=t(9611),x=t(1253);let m=(0,c.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=t(7603),h=t(2005),u=t(407),p=t(9467),f=t(3176);function j(){let{user:e}=(0,u.A)(),s=(0,p.Sk)(),[t,c]=(0,f.useState)([]),[j,g]=(0,f.useState)([]),[y,N]=(0,f.useState)([]),[b,v]=(0,f.useState)([]);if((0,f.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("inspections")||"[]"),s=JSON.parse(localStorage.getItem("exceptions")||"[]"),t=JSON.parse(localStorage.getItem("users")||"[]"),r=JSON.parse(localStorage.getItem("notices")||"[]");c(Array.isArray(e)?e:[]),g(Array.isArray(s)?s:[]),N(Array.isArray(t)?t:[]),v(Array.isArray(r)?r:[])}catch(e){console.error("Error parsing localStorage data:",e),c([]),g([]),N([]),v([])}},[]),!e)return null;let w=new Date().toISOString().split("T")[0],A=Array.isArray(t)?t.filter(s=>s.date===w&&("staff"!==e.role||s.region===e.department)):[],k=Array.isArray(j)?j.filter(s=>"접수"===s.status&&("staff"!==e.role||s.requester===e.name)):[],Z=Array.isArray(t)?t.filter(e=>{let s=new Date(e.date),t=new Date;return t.setDate(t.getDate()-t.getDay()),s>=t&&"completed"===e.status}).length:0,S=Array.isArray(t)?t.filter(e=>{let s=new Date(e.date),t=new Date;return t.setDate(t.getDate()-t.getDay()),s>=t}).length:0,M=S>0?Math.round(Z/S*100):0,D=Array.isArray(y)?y.filter(e=>"approved"===e.status).length:0,B=Array.isArray(b)?b.filter(e=>e.isPinned).slice(0,3):[],E=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},W=e=>{switch(e){case"completed":return"완료";case"in-progress":return"진행중";case"pending":return"대기";default:return"알 수 없음"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"대시보드"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[e.name,"님, 안녕하세요. 오늘의 점검 현황을 확인하세요."]})]}),B.length>0&&(0,r.jsxs)(a.Zp,{className:"border-l-4 border-l-primary",children:[(0,r.jsx)(a.aR,{children:(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(i,{className:"h-5 w-5"}),"중요 공지사항"]})}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"space-y-2",children:B.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,r.jsx)("span",{className:"font-medium",children:e.title}),(0,r.jsx)(l.E,{variant:"destructive",className:"text-xs",children:"고정"})]},e.id))}),(0,r.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-3 bg-transparent",onClick:()=>window.location.href="/dashboard/board/notice",children:"전체 공지 보기"})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"staff"===e.role?"내 점검 일정":"오늘 점검 일정"}),(0,r.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.length}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["완료: ",A.filter(e=>"completed"===e.status).length,"건, 진행중:"," ",A.filter(e=>"in-progress"===e.status).length,"건"]})]})]}),s.canApproveExceptions&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"승인 대기"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:k.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"예외 신청 건"})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"이번 주 완료율"}),(0,r.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[M,"%"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["완료 ",Z,"건 / 총 ",S,"건"]})]})]}),s.canManageUsers&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ZB,{className:"text-sm font-medium",children:"활성 사용자"}),(0,r.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:D}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"승인된 사용자"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"h-5 w-5"}),"staff"===e.role?"내 점검 일정":"오늘의 점검 일정"]}),(0,r.jsx)(a.BT,{children:"admin"===e.role?"전체 점검 현황":"manager"===e.role?"팀 점검 현황":"내 점검 일정"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsxs)("div",{className:"space-y-3",children:[A.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium",children:e.branchName||e.facility}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.region})]}),(0,r.jsx)(l.E,{className:E(e.status),children:W(e.status)})]},e.id)),0===A.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"오늘 예정된 점검이 없습니다."})]}),(0,r.jsx)(n.$,{variant:"outline",className:"w-full mt-4 bg-transparent",onClick:()=>window.location.href="/dashboard/inspections/calendar",children:"전체 일정 보기"})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-5 w-5"}),"staff"===e.role?"내 예외 신청 현황":"승인 대기 중인 예외 신청"]}),(0,r.jsx)(a.BT,{children:"staff"===e.role?"내 신청 현황":"팀 승인 대기 건"})]}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsxs)("div",{className:"space-y-3",children:[k.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-start justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium",children:e.branchName}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.requester," \xb7 ",e.date]}),(0,r.jsx)("p",{className:"text-sm mt-1",children:e.reason})]}),(0,r.jsx)("div",{className:"flex gap-2",children:s.canApproveExceptions&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.$,{size:"sm",variant:"outline",children:"승인"}),(0,r.jsx)(n.$,{size:"sm",variant:"outline",children:"반려"})]})})]},e.id)),0===k.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"staff"===e.role?"신청한 예외 요청이 없습니다.":"승인 대기 중인 요청이 없습니다."})]}),(0,r.jsx)(n.$,{variant:"outline",className:"w-full mt-4 bg-transparent",children:"staff"===e.role?"내 신청 내역":"승인 관리"})]})]})]})]})}},7603:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(7561).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9306:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(7561).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[685,587,21,476,571,358],()=>s(5120)),_N_E=e.O()}]);