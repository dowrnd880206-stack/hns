(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{8061:(e,s,t)=>{Promise.resolve().then(t.bind(t,8831))},8831:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var n=t(4),i=t(4806),l=t(3176),a=t(8924),c=t(894),d=t(416),r=t(4294),x=t(6949),h=t(7572),o=t(4574),m=t(9221);let j=(0,t(7561).A)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);var u=t(9611),v=t(9954),p=t(776);function N(){let{user:e}=(0,p.A)(),[s,t]=(0,l.useState)([]),[i,N]=(0,l.useState)(!1),[g,f]=(0,l.useState)(null),[w,y]=(0,l.useState)({title:"",content:"",isPinned:!1});(0,l.useEffect)(()=>{t(JSON.parse(localStorage.getItem("notices")||"[]"))},[]);let b=e=>{t(s=>s.map(s=>s.id===e.id?{...s,views:s.views+1}:s)),f({...e,views:e.views+1})},k=(null==e?void 0:e.role)==="admin",P=[...s].sort((e,s)=>e.isPinned&&!s.isPinned?-1:!e.isPinned&&s.isPinned?1:new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"공지사항"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"중요한 공지사항을 확인하세요"})]}),k&&(0,n.jsxs)(h.lG,{open:i,onOpenChange:N,children:[(0,n.jsx)(h.zM,{asChild:!0,children:(0,n.jsxs)(a.$,{children:[(0,n.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"공지 작성"]})}),(0,n.jsxs)(h.Cf,{className:"max-w-2xl",children:[(0,n.jsx)(h.c7,{children:(0,n.jsx)(h.L3,{children:"새 공지사항 작성"})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"제목"}),(0,n.jsx)(d.p,{value:w.title,onChange:e=>y(s=>({...s,title:e.target.value})),placeholder:"공지사항 제목을 입력하세요"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"내용"}),(0,n.jsx)(r.T,{value:w.content,onChange:e=>y(s=>({...s,content:e.target.value})),placeholder:"공지사항 내용을 입력하세요",rows:6})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"pinned",checked:w.isPinned,onChange:e=>y(s=>({...s,isPinned:e.target.checked}))}),(0,n.jsx)(o.J,{htmlFor:"pinned",children:"상단 고정"})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(a.$,{variant:"outline",onClick:()=>N(!1),children:"취소"}),(0,n.jsx)(a.$,{onClick:()=>{if(!w.title.trim()||!w.content.trim())return;let n=[{id:Date.now().toString(),title:w.title,content:w.content,author:(null==e?void 0:e.name)||"관리자",createdAt:new Date().toISOString().split("T")[0],isPinned:w.isPinned,views:0},...s];t(n),localStorage.setItem("notices",JSON.stringify(n)),y({title:"",content:"",isPinned:!1}),N(!1)},children:"작성완료"})]})]})]})]})]}),(0,n.jsx)(c.Zp,{children:(0,n.jsx)(c.Wu,{className:"p-0",children:(0,n.jsx)("div",{className:"divide-y",children:P.map(e=>(0,n.jsx)("div",{className:"p-4 hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>b(e),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.isPinned&&(0,n.jsx)(j,{className:"h-4 w-4 text-red-500"}),(0,n.jsx)("h3",{className:"font-medium text-lg",children:e.title}),e.isPinned&&(0,n.jsx)(x.E,{variant:"destructive",className:"text-xs",children:"고정"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:e.content}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,n.jsx)("span",{children:e.author}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(u.A,{className:"h-3 w-3"}),e.createdAt]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(v.A,{className:"h-3 w-3"}),e.views]})]})]})})},e.id))})})}),(0,n.jsx)(h.lG,{open:!!g,onOpenChange:()=>f(null),children:(0,n.jsxs)(h.Cf,{className:"max-w-3xl",children:[(0,n.jsx)(h.c7,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(null==g?void 0:g.isPinned)&&(0,n.jsx)(j,{className:"h-4 w-4 text-red-500"}),(0,n.jsx)(h.L3,{children:null==g?void 0:g.title})]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground border-b pb-2",children:[(0,n.jsxs)("span",{children:["작성자: ",null==g?void 0:g.author]}),(0,n.jsxs)("span",{children:["작성일: ",null==g?void 0:g.createdAt]}),(0,n.jsxs)("span",{children:["조회수: ",null==g?void 0:g.views]})]}),(0,n.jsx)("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:null==g?void 0:g.content})]})]})})]})}function g(){return(0,n.jsx)(i.DashboardLayout,{children:(0,n.jsx)(N,{})})}},9954:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(7561).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[685,587,21,300,476,571,358],()=>s(8061)),_N_E=e.O()}]);