(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{407:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>i});var o=r(4),a=r(3176),n=r(8620);let s=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("currentUser");if(e)try{i(JSON.parse(e))}catch(e){console.error("Failed to parse stored user:",e),localStorage.removeItem("currentUser")}d(!1)},[]);let c=async(e,t)=>{d(!0);try{let r=await (0,n.iD)(e,t);if(r)return i(r),localStorage.setItem("currentUser",JSON.stringify(r)),!0;return!1}catch(e){return console.error("Login failed:",e),!1}finally{d(!1)}},m=async e=>{try{let t=JSON.parse(localStorage.getItem("pendingUsers")||"[]"),r={id:Date.now().toString(),employeeId:e.employeeId,password:e.password,name:e.name,email:e.email,department:e.department,role:e.role,status:"pending",createdAt:new Date().toISOString()};return t.push(r),localStorage.setItem("pendingUsers",JSON.stringify(t)),window.dispatchEvent(new Event("storage")),!0}catch(e){return console.error("Registration failed:",e),!1}};return(0,o.jsx)(s.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:l,login:c,logout:()=>{i(null),localStorage.removeItem("currentUser")},switchUser:e=>{let t=n.rB.find(t=>t.id===e);t&&(i(t),localStorage.setItem("currentUser",JSON.stringify(t)))},register:m},children:t})}function l(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4150:e=>{e.exports={style:{fontFamily:"'GeistMono', ui-monospace, SFMono-Regular, Roboto Mono, Menlo, Monaco, Liberation Mono, DejaVu Sans Mono, Courier New, monospace"},className:"__className_f910ec",variable:"__variable_f910ec"}},4326:()=>{},4881:(e,t,r)=>{Promise.resolve().then(r.bind(r,407)),Promise.resolve().then(r.t.bind(r,7822,23)),Promise.resolve().then(r.t.bind(r,4150,23)),Promise.resolve().then(r.t.bind(r,4326,23))},7822:e=>{e.exports={style:{fontFamily:"'GeistSans', 'GeistSans Fallback'"},className:"__className_fb8f2c",variable:"__variable_fb8f2c"}},8620:(e,t,r)=>{"use strict";r.d(t,{cb:()=>n,iD:()=>a,rB:()=>o});let o=[{id:"1",name:"홈앤",employeeId:"admin",department:"설비관리팀",position:"팀장",role:"admin",isApproved:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"일데모",employeeId:"tnehrnjs1",department:"수도권1",position:"본부담당자",role:"staff",region:"수도권1",isApproved:!0,createdAt:new Date("2024-01-02")},{id:"3",name:"이데모",employeeId:"tnehrnjs2",department:"수도권2",position:"본부담당자",role:"staff",region:"수도권2",isApproved:!0,createdAt:new Date("2024-01-03")}];async function a(e,t){if("admin"===e&&"windows"===t)return o.find(e=>"admin"===e.role)||null;try{let r=JSON.parse(localStorage.getItem("approvedUsers")||"[]").find(r=>r.employeeId===e&&r.password===t);if(r)return{id:r.id,name:r.name,employeeId:r.employeeId,department:r.department,position:r.role,role:r.role,region:r.department,isApproved:!0,createdAt:new Date(r.createdAt)}}catch(e){console.error("Failed to check approved users:",e)}try{let r=JSON.parse(localStorage.getItem("demoPasswords")||"{}");if(r[e]&&r[e]===t){let t=o.find(t=>t.employeeId===e);if(t)return t}}catch(e){console.error("Failed to check demo passwords:",e)}let r=o.find(t=>t.employeeId===e);return r&&(t===e||"password"===t)?r:null}function n(e){switch(e){case"admin":return"최고 관리자";case"manager":return"현장 매니저";case"staff":return"점검 담당자";default:return"사용자"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[797,841,476,571,358],()=>t(4881)),_N_E=e.O()}]);